import{a as I}from"./tasks-Ry853RJc.js";import{_ as M,r as _,o as B,b as L,c as o,d as n,f as c,e as t,F as p,B as w,g as m,i as N,s as C,R,n as V,D as j,t as k,l as u,J as F,K as G}from"./index-yneSRaZ5.js";const l=h=>(F("data-v-05069e16"),h=h(),G(),h),A={class:"container mt-5"},E={class:"list-unstyled row"},J={class:"position-relative mb-4"},K={class:"z-1"},q=l(()=>t("h1",{class:"h2 mb-1"},"當前直播課程",-1)),H={class:"h2 mb-2"},O=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),P={class:"mb-5"},Q={class:"d-flex align-items-center justify-content-between"},U=l(()=>t("h2",{class:"text-primary fs-4 fw-bold"},"我的任務列表",-1)),W=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),X={class:"position-relative",style:{"min-height":"200px"}},Y={class:"list-unstyled row"},Z={class:"card"},ss=["src","alt"],ts={class:"card-body h-100"},es={class:"card-title fw-bold mb-3"},as=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),os={class:"mb-5"},ns={class:"d-flex align-items-center justify-content-between"},ls=l(()=>t("h2",{class:"text-primary fs-4 fw-bold"}," 當前的直播班課程",-1)),is=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),cs={key:0,class:"list-unstyled row"},ds={class:"card"},rs=["src","alt"],_s={class:"card-body h-100"},ms={class:"card-title fw-bold mb-3"},us=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),hs={key:1,class:"text-center bg-light py-3"},gs=l(()=>t("p",{class:"mb-0"},"目前沒有進行中的直播班課程",-1)),ps=[gs],fs={__name:"Dashboard",setup(h){const{apiGetMyTask:T,apiGetTraining:$}=I,f=_(!1),x=_([]),D=async(d=1,r=3)=>{var e,i,s,g;f.value=!0;try{const{tasks:a}=await T(d,r);x.value=a}catch(a){C.toastMessage("danger","info",`${(i=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:i.statusCode}:${(g=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:g.message}`)}f.value=!1},v=_(!1),b=_([]),y=_([]),S=async()=>{var d,r,e,i;v.value=!0;try{const{training_classes:s}=await $();b.value=s.filter(g=>{const a=new Date(g.end_at).getTime(),z=new Date().getTime();return a>z}),y.value=s.slice(0,3)}catch(s){C.toastMessage("danger","info",`${(r=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:r.statusCode}:${(i=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:i.message}`)}v.value=!1};return B(()=>{D(),S()}),(d,r)=>{const e=L("RouterLink"),i=L("Loading");return o(),n(p,null,[c(R),t("div",A,[t("ul",E,[(o(!0),n(p,null,w(b.value,s=>(o(),n("li",{key:s.id,class:V(b.value.length>1?"col-md-6":"col-12")},[t("div",J,[t("div",{class:"bg-linear-gradient d-flex align-items-end p-6",style:j([{height:"360px"},{backgroundImage:`url(${s.cover_url})`,backgroundRepeat:"no-repeat",backgroundSize:"cover"}])},[t("div",K,[q,t("h2",H,k(s.name),1),c(e,{to:`/training/${s.id}`,class:"goto stretched-link"},{default:m(()=>[u(" 進入直播班 "),O]),_:2},1032,["to"])])],4)])],2))),128))]),t("div",P,[t("div",Q,[U,c(e,{to:"/tasks/my",class:"text-decoration-none link-primary fs-6 fw-normal"},{default:m(()=>[u(" 查看所有任務 "),W]),_:1})]),t("div",X,[c(i,{"is-full-page":!1,active:f.value,"z-index":1049},null,8,["active"]),t("ul",Y,[(o(!0),n(p,null,w(x.value,s=>(o(),n("li",{key:s.id,class:"col-md-4 mb-6"},[t("div",Z,[t("img",{src:s.image_url,class:"card-img-top rounded mb-3",alt:s.name},null,8,ss),t("div",ts,[t("h5",es,k(s.name),1),c(e,{to:`/tasks/${s.id}`,class:"goto stretched-link"},{default:m(()=>[u(" 查看任務 "),as]),_:2},1032,["to"])])])]))),128))])])]),t("div",os,[t("div",ns,[ls,c(e,{to:"/training",class:"text-decoration-none link-primary fs-6 fw-normal"},{default:m(()=>[u(" 查看所有直播班 "),is]),_:1})]),y.value.length>0?(o(),n("ul",cs,[(o(!0),n(p,null,w(y.value,s=>(o(),n("li",{key:s.id,class:"col-md-4 mb-6"},[t("div",ds,[t("img",{src:s.cover_url,class:"card-img-top rounded mb-3",alt:s.title},null,8,rs),t("div",_s,[t("h5",ms,k(s.name),1),c(e,{to:`/training/${s.id}`,class:"goto stretched-link"},{default:m(()=>[u(" 進入直播班 "),us]),_:2},1032,["to"])])])]))),128))])):v.value?N("",!0):(o(),n("div",hs,ps))])])],64)}}},ys=M(fs,[["__scopeId","data-v-05069e16"]]);export{ys as default};
